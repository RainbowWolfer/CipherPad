<hc:Window
	x:Class="CipherPad.MainWindow"
	xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
	xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
	xmlns:base="RW.Base.WPF"
	xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
	xmlns:dxmvvm="http://schemas.devexpress.com/winfx/2008/xaml/mvvm"
	xmlns:hc="https://handyorg.github.io/handycontrol"
	xmlns:local="clr-namespace:CipherPad"
	xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
	xmlns:p="clr-namespace:CipherPad.Properties"
	xmlns:wpf="RW.Common.WPF"
	Title="{x:Static p:AppConfig.AppName}"
	d:DataContext="{d:DesignInstance Type=local:MainWindowViewModel}"
	DataContext="{base:DISource Type=local:MainWindowViewModel}"
	Width="800"
	Height="450"
	MinWidth="350"
	MinHeight="220"
	Icon="/Icon.png"
	ResizeMode="CanResizeWithGrip"
	ShowIcon="True"
	mc:Ignorable="d">

	<Window.Resources>
		<wpf:BindingProxy x:Key="ViewModel" Data="{Binding}"/>


		<wpf:CommandProxy x:Key="CloseCommand" Command="{Binding CloseCommand}"/>
	</Window.Resources>

	<dxmvvm:Interaction.Behaviors>
		<dxmvvm:OpenFileDialogService/>
		<dxmvvm:SaveFileDialogService/>
		<dxmvvm:MessageBoxService/>
	</dxmvvm:Interaction.Behaviors>

	<Grid Background="{DynamicResource RegionBrush}">
		<!--<StackPanel x:Name="Panel">
			<Button Click="Button_Click" Content="1"/>
			<Button Click="Button_Click_1" Content="2"/>
			<Button Background="{DynamicResource BorderBrush}" Click="Button_Click_2" Content="3"/>
			<Button Style="{DynamicResource ButtonPrimary}" Click="Button_Click_3" Content="Window"/>
			<Button Click="Button_Click_4" Content="Add"/>

		</StackPanel>-->
		<DockPanel>

			<Border
				Padding="6,2,6,6"
				BorderThickness="0,0,0,1"
				BorderBrush="{DynamicResource BorderBrush}"
				DockPanel.Dock="Top">
				<DockPanel>
					<Border>
						<hc:UniformSpacingPanel HorizontalSpacing="4" Orientation="Horizontal">
							<wpf:MenuButton Style="{DynamicResource ButtonBaseStyle}" ToolTip="New File">
								<wpf:MenuButton.ContextMenu>
									<ContextMenu Style="{StaticResource ContextMenu.Small}">
										<MenuItem Command="{Binding NewPasswordFileCommand}" Header="New password encrypted file"/>
										<MenuItem Command="{Binding NewRSAFileCommand}" Header="New RSA encrypted file"/>
									</ContextMenu>
								</wpf:MenuButton.ContextMenu>
								<wpf:FontIcon Text="&#xE8A5;"/>
							</wpf:MenuButton>
							<Button Command="{Binding OpenCommand}" ToolTip="Open File">
								<wpf:FontIcon Text="&#xE8E5;"/>
							</Button>

							<ItemsControl ItemsSource="{Binding AdditionalButtons}">
								<ItemsControl.ItemsPanel>
									<ItemsPanelTemplate>
										<hc:UniformSpacingPanel HorizontalSpacing="4" Orientation="Horizontal"/>
									</ItemsPanelTemplate>
								</ItemsControl.ItemsPanel>

								<ItemsControl.ItemTemplate>
									<DataTemplate>
										<Button Command="{Binding Command}" ToolTip="{Binding ToolTip}">
											<wpf:FontIcon Text="{Binding Icon}"/>
										</Button>
									</DataTemplate>
								</ItemsControl.ItemTemplate>

							</ItemsControl>

						</hc:UniformSpacingPanel>
					</Border>

					<Border HorizontalAlignment="Right">
						<hc:UniformSpacingPanel HorizontalSpacing="4" ItemVerticalAlignment="Center" Orientation="Horizontal">
							<TextBlock Margin="4,0" Text="{Binding Hello}"/>
							<Button Command="{Binding SwitchThemeCommand}" Content="Switch Theme"/>
						</hc:UniformSpacingPanel>
					</Border>

				</DockPanel>
			</Border>

			<Border
				Padding="4,2"
				BorderThickness="0,1,0,0"
				BorderBrush="{DynamicResource BorderBrush}"
				Background="{DynamicResource SecondaryRegionBrush}"
				DockPanel.Dock="Bottom">
				<DockPanel>
					<Border/>
					<Border HorizontalAlignment="Right">
						<TextBlock Margin="0,0,18,0" VerticalAlignment="Center" Text="1.0.0"/>
					</Border>
				</DockPanel>
			</Border>

			<TabControl
				d:SelectedIndex="0"
				BorderThickness="0,1,0,0"
				SelectedItem="{Binding SelectedTabItem, Mode=TwoWay}"
				TabStripPlacement="Top"
				ItemsSource="{Binding TabItems}"
				d:ItemsSource="{d:SampleData ItemCount=5}">

				<TabControl.ItemTemplate>
					<DataTemplate>
						<Border>
							<DockPanel MinWidth="120">
								<Button
									Height="14"
									Padding="0"
									BorderThickness="0"
									Background="Transparent"
									Command="{StaticResource CloseCommand}"
									CommandParameter="{Binding}"
									DockPanel.Dock="Right">
									<wpf:FontIcon FontSize="10" Foreground="{DynamicResource DangerBrush}" Text="&#xE653;"/>
								</Button>
								<TextBlock VerticalAlignment="Center" Text="{Binding Header}"/>
							</DockPanel>
						</Border>
					</DataTemplate>
				</TabControl.ItemTemplate>

				<TabControl.ContentTemplate>
					<DataTemplate>
						<Border>
							<ContentControl Content="{Binding View}" Focusable="False" IsTabStop="False"/>
						</Border>
					</DataTemplate>
				</TabControl.ContentTemplate>

			</TabControl>
		</DockPanel>

	</Grid>

</hc:Window>
